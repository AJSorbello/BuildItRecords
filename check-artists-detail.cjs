const { getPool, getTableSchema } = require("./api/db-utils"); async function main() { const pool = getPool(); const client = await pool.connect(); try { console.log("Checking the artists table specifically"); console.log("1. Schema inspection:"); const schema = await getTableSchema(client, "artists"); if (schema.length > 0) { schema.forEach(col => console.log(`  - ${col.column_name} (${col.data_type})`)); } else { console.log("No schema found for artists table"); } console.log("2. Total artists count:"); const countResult = await client.query("SELECT COUNT(*) FROM artists"); console.log(`  - Total artists: ${countResult.rows[0].count}`); console.log("3. Sample artists query:"); try { const sampleResult = await client.query("SELECT * FROM artists LIMIT 5"); console.log(`  - Found ${sampleResult.rows.length} sample artists`); if (sampleResult.rows.length > 0) { console.log(JSON.stringify(sampleResult.rows[0], null, 2)); } } catch (err) { console.error("Error querying artists:", err.message); } } finally { client.release(); } } main().catch(console.error);
